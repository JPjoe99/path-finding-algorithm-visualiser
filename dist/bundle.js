(()=>{"use strict";var t,e=function(){function t(t,e,i){this.x=t,this.y=e,this.id=i}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.getId=function(){return this.id},t.prototype.getContent=function(){return this.content},t.prototype.setContent=function(t){this.content=t},t}(),i=function(){function t(t,e,i){this.id=t,this.x=e,this.y=i}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.getId=function(){return this.id},t}(),n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)},function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(t){function e(e,i,n){var o=t.call(this,e,i,n)||this;return o.nodesPastThrough=[],o.status="",o}return n(e,t),e.prototype.getDistance=function(){return this.distance},e.prototype.setDistance=function(t){this.distance=t},e.prototype.getVisitStatus=function(){return this.visitStatus},e.prototype.setVisitStatus=function(t){this.visitStatus=t},e.prototype.setStatus=function(t){this.status=t},e.prototype.getStatus=function(){return this.status},e.prototype.getNumberOfEdges=function(){return this.numberOfEdges},e.prototype.setNumberOfEdges=function(t){this.numberOfEdges},e.prototype.setNodePastThrough=function(t){this.nodePastThrough=t},e.prototype.getNodePastThrough=function(){return this.nodePastThrough},e.prototype.getNodesPastThrough=function(){return this.nodesPastThrough},e.prototype.addNodePastThrough=function(t){this.nodesPastThrough.push(t)},e}(i),r=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return r(e,t),e}(i),u=function(){function t(t,i){this.squares=[],this.x=t,this.y=i;for(var n=0;n<i;n++)for(var r=0;r<t;r++){var s=t*n+r;this.squares.push(new e(r,n,s)),this.squares[t*n+r].setContent(new o(s,r,n))}}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.getSquares=function(){return this.squares},t.prototype.getSquare=function(t){for(var e=0;e<this.squares.length;e++)if(this.squares[e].getId()==t)return this.squares[e]},t.prototype.placeWallOnSquare=function(t){var e=this.getSquare(t),i=e.getX(),n=e.getY();this.getSquare(t).setContent(new s(t,i,n))},t}(),h=function(){function t(){this.mainBody=document.querySelector("#main")}return t.prototype.drawGrid=function(t){console.log(this.mainBody.clientWidth);var e=document.createElement("div");e.id="grid",e.className="grid-container";var i=screen.availWidth/30;console.log(screen.availWidth),i=Math.round(i),console.log(i),e.style.gridTemplateColumns="repeat("+t.getX()+", 30px)",e.style.gridTemplateRows="repeat("+t.getY()+", 30px";for(var n=t.getSquares(),o=0;o<n.length;o++)e.appendChild(this.drawSquare(n[o]));this.mainBody.appendChild(e)},t.prototype.drawSquare=function(t){var e=document.createElement("div");return e.className="grid-square",e.id=""+t.getId(),e},t.prototype.drawNode=function(t){var e=document.createElement("div");return e.className="grid-square",e.id=""+t.getId(),e},t.prototype.highlightSquare=function(t,e){var i=document.getElementById(""+t);i.style.backgroundColor=""+e,i.style.border=""},t.prototype.highlightShortestPath=function(t){for(var e=0;e<t.length;e++)this.highlightSquare(t[e].getId(),"yellow")},t.prototype.unhighlightStart=function(t){document.getElementById(""+t).innerHTML=""},t.prototype.highlightStart=function(t){var e=document.getElementById(""+t),i=document.createElement("img");i.src="https://img.icons8.com/ios-filled/50/000000/runner-starting-the-race.png",i.style.height="100%",i.style.width="100%",e.appendChild(i)},t.prototype.highlightEnd=function(t){var e=document.getElementById(""+t),i=document.createElement("img");i.src="https://img.icons8.com/android/24/000000/finish-flag.png",i.style.height="100%",i.style.width="100%",e.appendChild(i)},t.prototype.highlightVisitedNodes=function(t,e){for(var i=0;i<t.length;i++)this.highlightSquare(t[i].getId(),e)},t.prototype.execute=function(t,e,i){var n=this,o=0,r=setInterval((function(){n.highlightSquare(t[o].getId(),i),++o==t.length&&(clearInterval(r),n.executeShortestPath(e))}),25)},t.prototype.executeShortestPath=function(t){var e=this,i=0,n=setInterval((function(){e.highlightSquare(t[i].getId(),"yellow"),++i==t.length&&clearInterval(n)}),25)},t.prototype.clearVisitedNodes=function(t){this.highlightVisitedNodes(t,"white")},t}(),a=function(){function t(t){this.unvisitedNodes=[],this.shortestPath=[],this.visitedNodes=[],this.grid=t,this.startingNode=null,this.endingNode=null,this.totNumberOfEdges=null;for(var e=t.getSquares(),n=0;n<e.length;n++){var o=e[n].getContent();o instanceof i&&this.unvisitedNodes.push(o)}this.totNumberOfEdges=0}return t.prototype.resetAlgorithm=function(t,e){this.resetShortestPath(),this.resetUnvisitedNodes(),this.resetVisitedNodes(),this.setStartingNode(t),this.setEndingNode(e),this.setDistances(),this.setNumberOfEdges()},t.prototype.getStartingNode=function(){return this.startingNode},t.prototype.setStartingNode=function(t){if(null!=this.startingNode)return this.startingNode.setStatus(""),this.startingNode=t,void this.startingNode.setStatus("S");this.startingNode=t,this.startingNode.setStatus("S")},t.prototype.getEndingNode=function(){return this.endingNode},t.prototype.setEndingNode=function(t){if(null!=this.endingNode)return this.endingNode.setStatus(""),this.endingNode=t,void this.endingNode.setStatus("F");this.endingNode=t,this.endingNode.setStatus("F")},t.prototype.getVisitedNodes=function(){return this.visitedNodes},t.prototype.resetVisitedNodes=function(){this.visitedNodes=[]},t.prototype.resetUnvisitedNodes=function(){this.unvisitedNodes=[];for(var t=this.grid.getSquares(),e=0;e<t.length;e++){var i=t[e].getContent();i instanceof o&&this.unvisitedNodes.push(i)}for(e=0;e<this.unvisitedNodes.length;e++)this.unvisitedNodes[e].setVisitStatus(!1)},t.prototype.setShortestPath=function(t){this.shortestPath=t},t.prototype.resetShortestPath=function(){this.shortestPath=[]},t.prototype.getShortestPath=function(){return this.shortestPath},t.prototype.getUnvisitedNodes=function(){return this.unvisitedNodes},t.prototype.setDistances=function(){for(var t=0;t<this.unvisitedNodes.length;t++)"S"==this.unvisitedNodes[t].getStatus()?this.unvisitedNodes[t].setDistance(0):this.unvisitedNodes[t].setDistance(1/0);this.unvisitedNodes.sort((function(t,e){return t.getDistance()>e.getDistance()?1:-1}))},t.prototype.findNearestNeighbours=function(t){for(var e=[],i=0;i<this.unvisitedNodes.length;i++)this.unvisitedNodes[i]instanceof s||(t.getX()-this.unvisitedNodes[i].getX()!=1&&t.getX()-this.unvisitedNodes[i].getX()!=-1||t.getY()-this.unvisitedNodes[i].getY()!=0||t.getNodePastThrough()==this.unvisitedNodes[i])&&(t.getY()-this.unvisitedNodes[i].getY()!=1&&t.getY()-this.unvisitedNodes[i].getY()!=-1||t.getX()-this.unvisitedNodes[i].getX()!=0||t.getNodePastThrough()==this.unvisitedNodes[i])||e.push(this.unvisitedNodes[i]);return e},t.prototype.setNumberOfEdges=function(){for(var t=0;t<this.unvisitedNodes.length;t++)"S"==this.unvisitedNodes[t].getStatus()?this.unvisitedNodes[t].setNumberOfEdges(0):this.unvisitedNodes[t].setNumberOfEdges(1/0)},t.prototype.generateMaze=function(){for(var t=0;t<this.grid.getSquares().length;t++)this.grid.getSquare(t).getX(),this.grid.getSquare(t).getY(),this.grid.placeWallOnSquare(t)},t}(),g=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(e){return t.call(this,e)||this}return g(e,t),e.prototype.findNumberOfEdges=function(t){var e=3;return 9==t.getX()||t.getX()==this.grid.getX()?e=0!=t.getY()||t.getY()!=this.grid.getY()?2:1:0!=t.getY()&&t.getY()!=this.grid.getY()||(e=9!=t.getX()||t.getX()!=this.grid.getX()?2:1),e},e.prototype.run=function(){for(var t=this.getStartingNode();"F"!=this.getUnvisitedNodes()[0].getStatus();)this.runAlgorithm(t),t=this.getUnvisitedNodes()[0];for(var e=this.getEndingNode(),i=[];"S"!=e.getNodePastThrough().getStatus();)i.push(e),e=e.getNodePastThrough();return i.push(e),i.shift(),i.push(e.getNodePastThrough()),console.log(i),i},e.prototype.runAlgorithm=function(t){for(var e=this.getUnvisitedNodes(),i=this.findNearestNeighbours(t),n=0;n<i.length;n++){var o=this.findNumberOfEdges(i[n])+t.getNumberOfEdges(),r=i[n].getX()-t.getX(),s=i[n].getY()-t.getY(),u=Math.pow(Math.pow(r,2)+Math.pow(s,2),.5)+t.getDistance();i[n].getDistance()>u&&(i[n].setNumberOfEdges(o),i[n].setNumberOfEdges(o),i[n].setDistance(u),i[n].addNodePastThrough(t),i[n].setNodePastThrough(t))}t.setVisitStatus(!0),this.getVisitedNodes().push(t),e.splice(e.indexOf(t),1),e.sort((function(t,e){return t.getDistance()>e.getDistance()?1:-1}))},e}(a),c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),p=function(t){function e(e){return t.call(this,e)||this}return c(e,t),e.prototype.calculateHeuristic=function(t,e){var i=this.getEndingNode(),n=i.getX(),o=i.getY(),r=e.getX(),s=e.getY(),u=t.getX(),h=t.getY();return Math.pow(Math.pow(n-r,2)+Math.pow(o-s,2),.5)+Math.pow(Math.pow(r-u,2)+Math.pow(h-s,2),.5)},e.prototype.getHeuristic=function(){},e.prototype.run=function(){for(var t=this.getStartingNode();"F"!=this.getUnvisitedNodes()[0].getStatus();)this.runAlgorithm(t),t=this.getUnvisitedNodes()[0];this.runAlgorithm(t);for(var e=this.getEndingNode(),i=[];"S"!=e.getNodePastThrough().getStatus();)i.push(e),e=e.getNodePastThrough();return i.push(e),i.shift(),i.push(e.getNodePastThrough()),console.log(i),i},e.prototype.runAlgorithm=function(t){for(var e=this.getUnvisitedNodes(),i=this.findNearestNeighbours(t),n=[],o=0;o<i.length;o++){var r=this.calculateHeuristic(t,i[o]),s={neighbour:i[o],heuristic:r};n.push(s)}n.sort((function(t,e){return t.heuristic>e.heuristic?1:-1}));var u=n[0].neighbour,h=u.getX()-t.getX(),a=u.getY()-t.getY(),g=Math.pow(Math.pow(h,2)+Math.pow(a,2),.5)+t.getDistance();for(u.setDistance(g),u.addNodePastThrough(t),u.setNodePastThrough(t),t.setVisitStatus(!0),o=0;o<i.length;o++)i[o]!=u&&(i[o].setVisitStatus(!0),this.getVisitedNodes().push(i[o]));this.getVisitedNodes().push(t),e.splice(e.indexOf(t),1),e.sort((function(t,e){return t.getDistance()>e.getDistance()?1:-1}))},e}(a),l=function(){function t(t){var e=this;this.hoverOut=function(t){var e=t.target;console.log(e.src)},this.hoverIn=function(t){var i=t.target.id;e.draw.highlightStart(i)},this.selectAlgorithm=function(t){var i=t.target;console.log(i.innerText),"Dijkstra"==i.innerText?e.algorithm=new d(e.grid):(i.innerText="A*")&&(e.algorithm=new p(e.grid))},this.placeImage=function(t){var i=t.target.id;"start"==e.image.type?(null!=e.startingNode&&e.draw.unhighlightStart(e.startingNode.getId()),e.selectStartingNode(e.grid.getSquare(i).getContent()),e.draw.highlightStart(i),e.image=""):"end"==e.image.type?(null!=e.endingNode&&e.draw.unhighlightStart(e.endingNode.getId()),e.selectEndingNode(e.grid.getSquare(i).getContent()),e.draw.highlightEnd(i)):"wall"==e.image.type&&(e.grid.placeWallOnSquare(i),e.draw.highlightSquare(i,"gray")),null!=e.startingNode&&null!=e.endingNode&&e.runAlgorithm()},this.grabImage=function(t){var i=t.target;e.image={type:""+i.id,src:""+i.src}},this.runVisualiser=function(){e.runAlgorithm()},this.grid=t,this.draw=new h,this.algorithm=new d(t),this.startingNode=null,this.endingNode=null,this.image=""}return t.prototype.startApplication=function(){this.draw.drawGrid(this.grid),this.runApplication()},t.prototype.runApplication=function(){for(var t=document.querySelector("#grid").children,e=0;e<t.length;e++)t[e].addEventListener("click",this.placeImage);document.querySelector(".visualise").addEventListener("click",this.runVisualiser);var i=document.getElementsByTagName("img");for(e=0;e<i.length;e++)i[e].addEventListener("mousedown",this.grabImage);document.getElementById("wall").addEventListener("click",this.grabImage);var n=document.querySelectorAll("#algo");for(e=0;e<n.length;e++)n[e].addEventListener("click",this.selectAlgorithm)},t.prototype.selectStartingNode=function(t){this.startingNode=t},t.prototype.selectEndingNode=function(t){this.endingNode=t},t.prototype.runAlgorithm=function(){this.draw.clearVisitedNodes(this.algorithm.getVisitedNodes()),this.algorithm.resetAlgorithm(this.startingNode,this.endingNode);var t=performance.now(),e=this.algorithm.run(),i=performance.now();console.log("Time taken to find shortest path: "+(i-t)),console.log(this.algorithm.getVisitedNodes()),this.draw.execute(this.algorithm.getVisitedNodes(),e,"green"),e.sort()},t}(),f=document.getElementById("content");console.log(f);var y=Math.min(screen.availWidth/f.clientWidth,screen.availHeight/f.clientHeight);f.style.transform="scale("+y+")",console.log(y),new l(new u(37,21)).startApplication()})();