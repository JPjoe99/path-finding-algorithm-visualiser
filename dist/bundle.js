(()=>{"use strict";var t,e=function(){function t(t,e,i,o){this.id=i,this.x=t,this.y=e,this.type=o}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.getId=function(){return this.id},t.prototype.getType=function(){return this.type},t}(),i=(t=function(i,o){return(t=e.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,i){for(var o in i)e.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])})(i,o)},function(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=i}t(i,o),i.prototype=null===o?e.create(o):(n.prototype=o.prototype,new n)}),o=function(t){function e(e,i,o){var n=t.call(this,e,i,o,"N")||this;return n.visitStatus=!1,n.status="",n}return i(e,t),e.prototype.setDistance=function(t){this.distance=t},e.prototype.setStatus=function(t){this.status=t},e.prototype.getStatus=function(){return this.status},e.prototype.setVisitStatus=function(t){this.visitStatus=t},e.prototype.getDistance=function(){return this.distance},e.prototype.setNodePastThrough=function(t){this.nodeThrough=t},e.prototype.getNodePastThrough=function(){return this.nodeThrough},e}(e),n=function(){function t(t,e,i){this.x=t,this.y=e,this.id=i}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.getId=function(){return this.id},t.prototype.getContent=function(){return this.content},t.prototype.setContent=function(t){this.content=t},t.prototype.placeNode=function(t){this.content=t},t.prototype.placeWall=function(t){this.content=t},t}(),s=function(){function t(t,e){this.squares=[],this.x=t,this.y=e;for(var i=0;i<e;i++)for(var s=0;s<t;s++){var r=t*i+s;this.squares.push(new n(s,i,r)),this.squares[t*i+s].placeNode(new o(s,i,r))}}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.getSquares=function(){return this.squares},t.prototype.getSquare=function(t){for(var e=0;e<this.squares.length;e++)if(this.squares[e].getId()==t)return this.squares[e]},t}(),r=function(){function t(){this.mainBody=document.querySelector("#main")}return t.prototype.drawGrid=function(t){var e=document.createElement("div");e.id="grid",e.className="grid-container";var i=screen.availWidth/30;console.log(screen.availWidth),i=Math.round(i),console.log(i),e.style.gridTemplateColumns="repeat("+t.getX()+", "+100/t.getX()+"vw)",e.style.gridTemplateRows="repeat("+t.getY()+", "+100/t.getY()+"vh";for(var o=t.getSquares(),n=0;n<o.length;n++)e.appendChild(this.drawSquare(o[n]));this.mainBody.appendChild(e)},t.prototype.drawSquare=function(t){var e=document.createElement("div");return e.className="grid-square",e.id=""+t.getId(),e},t.prototype.drawNode=function(t){var e=document.createElement("div");return e.className="grid-square",e.id=""+t.getId(),e},t.prototype.highlightSquare=function(t,e){document.getElementById(""+t).style.backgroundColor=""+e},t}(),u=function(){function t(t){this.unvisitedNodes=[],this.shortestPath=[],this.visitedNodes=[],this.grid=t,this.startingNode=null,this.endingNode=null;for(var e=t.getSquares(),i=0;i<e.length;i++){var o=e[i].getContent();"N"==o.getType()&&this.unvisitedNodes.push(o)}}return t.prototype.getStartingNode=function(){return this.startingNode},t.prototype.setStartingNode=function(t){this.startingNode=t,this.startingNode.setStatus("S")},t.prototype.getEndingNode=function(){return this.endingNode},t.prototype.setEndingNode=function(t){this.endingNode=t,this.endingNode.setStatus("F")},t.prototype.getVisitedNodes=function(){return this.visitedNodes},t.prototype.resetVisitedNodes=function(){this.visitedNodes=[]},t.prototype.resetUnvisitedNodes=function(){this.unvisitedNodes=[];for(var t=this.grid.getSquares(),e=0;e<t.length;e++){var i=t[e].getContent();"N"==i.getType()&&this.unvisitedNodes.push(i)}for(e=0;e<this.unvisitedNodes.length;e++)this.unvisitedNodes[e].setVisitStatus(!1);console.log(this.unvisitedNodes)},t.prototype.setShortestPath=function(t){this.shortestPath=t},t.prototype.resetShortestPath=function(){this.shortestPath=[]},t.prototype.getShortestPath=function(){return this.shortestPath},t.prototype.getUnvisitedNodes=function(){return this.unvisitedNodes},t.prototype.setDistances=function(){for(var t=0;t<this.unvisitedNodes.length;t++)"S"==this.unvisitedNodes[t].getStatus()?this.unvisitedNodes[t].setDistance(0):this.unvisitedNodes[t].setDistance(1/0)},t.prototype.performDijkstra=function(t){for(var e=this.getUnvisitedNodes(),i=[],o=0;o<e.length;o++)"W"!=e[o].getType()&&((t.getX()-e[o].getX()!=1&&t.getX()-e[o].getX()!=-1||t.getY()-e[o].getY()!=0||t.getNodePastThrough()==e[o])&&(t.getY()-e[o].getY()!=1&&t.getY()-e[o].getY()!=-1||t.getX()-e[o].getX()!=0||t.getNodePastThrough()==e[o])||i.push(e[o]));for(o=0;o<i.length;o++){var n=i[o].getX()-t.getX(),s=i[o].getY()-t.getY(),r=Math.pow(Math.pow(n,2)+Math.pow(s,2),.5)+t.getDistance();r<i[o].getDistance()&&(i[o].setDistance(r),i[o].setNodePastThrough(t))}t.setVisitStatus(!0),this.visitedNodes.push(t),e.splice(e.indexOf(t),1),e.sort((function(t,e){return t.getDistance()>e.getDistance()?1:-1}))},t}(),h=function(){var t=function(i,o){return(t=e.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,i){for(var o in i)e.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])})(i,o)};return function(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=i}t(i,o),i.prototype=null===o?e.create(o):(n.prototype=o.prototype,new n)}}(),g=function(t){function e(e,i,o){return t.call(this,e,i,o,"W")||this}return h(e,t),e}(e);new(function(){function t(t){var e=this;this.selectSquare=function(t){console.log(t);var i=t.target.id,o=e.grid.getSquare(i);if(1==t.ctrlKey){if(null!=e.startingNode){var n=e.startingNode.getId();e.draw.highlightSquare(n,"white")}var s=o.getContent();e.selectStartingNode(s),e.draw.highlightSquare(s.getId(),"red")}else if(1==t.altKey)null!=e.endingNode&&(n=e.endingNode.getId(),e.draw.highlightSquare(n,"white")),s=o.getContent(),e.selectEndingNode(s),e.draw.highlightSquare(s.getId(),"green");else{var r=o.getX(),u=o.getY();n=o.getId(),e.draw.highlightSquare(n,"white"),o.setContent(new g(r,u,n)),e.draw.highlightSquare(n,"black")}null!=e.startingNode&&null!=e.endingNode&&(console.log("Here"),e.runDijkstra())},this.grid=t,this.draw=new r,this.logic=new u(t),this.startingNode=null,this.endingNode=null}return t.prototype.startApplication=function(){this.draw.drawGrid(this.grid),this.runApplication()},t.prototype.runApplication=function(){for(var t=document.querySelector("#grid").children,e=0;e<t.length;e++)t[e].id=""+e,t[e].addEventListener("click",this.selectSquare)},t.prototype.selectStartingNode=function(t){this.startingNode=t},t.prototype.selectEndingNode=function(t){this.endingNode=t},t.prototype.runDijkstra=function(){for(var t=this.logic.getShortestPath(),e=0;e<t.length;e++)this.draw.highlightSquare(t[e].getId(),"white");this.logic.resetShortestPath(),t=this.logic.getShortestPath(),this.logic.resetUnvisitedNodes(),this.logic.resetVisitedNodes(),this.logic.setStartingNode(this.startingNode),this.logic.setEndingNode(this.endingNode),this.logic.setDistances();for(var i=this.logic.getStartingNode();i!=this.logic.getEndingNode();)this.logic.performDijkstra(i),i=this.logic.getUnvisitedNodes()[0];console.log(this.logic.getUnvisitedNodes()),console.log(this.logic.getVisitedNodes()),this.logic.getVisitedNodes().push(this.logic.getEndingNode());for(var o=this.logic.getVisitedNodes()[this.logic.getVisitedNodes().length-1];"S"!=o.getNodePastThrough().getStatus();)t.push(o),o=o.getNodePastThrough();for(t.push(o),t.shift(),e=0;e<t.length;e++)this.draw.highlightSquare(t[e].getId(),"blue")},t}())(new s(45,20)).startApplication()})();